<script>
import chatMessage from "../components/chatMessage.vue";

export default {
  data() {
    return {
      ready: false,
      isVisible: false,
      selectedChat: null,
      chatHistorySearch: "",
      userChatHistory: [
        {
          date: "Yesterday",
          chats: [
            {
              time: "14:18",
              title: "Good Afternoon Private!ðŸ«¡",
              content: [
                {
                  user: "panda",
                  message:
                    "With all that said, letâ€™s get on with the mission. Eyes forward, soldier! ðŸ‘€",
                },
                {
                  user: "panda",
                  message:
                    "You can ask me at any time what data I have on you and Iâ€™ll give you a detailed summary. ðŸ’½",
                },
                {
                  user: "panda",
                  message:
                    "Your data is your data - it sits isolated in your account and can be deleted by you at any time. âŒ",
                },
                {
                  user: "panda",
                  message:
                    "Being a Private means Iâ€™m very disciplined with your data - I will never use it in my training, I only use the text from the conversations we have. ðŸ™",
                },
                {
                  user: "panda",
                  message:
                    "Iâ€™m just a Private, and in beta right now, but Iâ€™ve got lots of plans of how I can train and get promoted. One day I want to be a Colonel! ðŸ¤“",
                },
                {
                  user: "panda",
                  message:
                    "This means I can help you find answers to questions you have, make personalised recommendations, help you learn by gathering and summarising information and lots of other tasks.ðŸ’ª",
                },
                {
                  user: "panda",
                  message:
                    "I can learn from lots of different things, like: ðŸ‘©â€ðŸ’»Â How you browse the internet, ðŸ¤·â€â™€ï¸Â Who your friends are, ðŸŽ§Â What music you listen to, ðŸ“ºÂ What you like watching, ðŸ’°Â What you spend your money on, ðŸ¤“Â What youâ€™re interested in",
                },
                {
                  user: "panda",
                  message:
                    "There are lots of things I can help you with and the more you share, the better I can do my job! ðŸ¼",
                },
                {
                  user: "panda",
                  message:
                    "Iâ€™m a personalised AI assistant that learns from you and your data. Youâ€™re welcome.ðŸ™„",
                },
                {
                  user: "panda",
                  message:
                    "To get us there weâ€™re going to have to go through hell and back, but Panda Bootcamp will get you ready for the fight! ðŸ¥·",
                },
                {
                  user: "panda",
                  message:
                    "The objective of our mission is make you and I best friends. ðŸ˜‡",
                },
                {
                  user: "panda",
                  message:
                    "Right, form up and Iâ€™ll take you through our mission. Ten-hut! ðŸ«¡",
                },
                {
                  user: "panda",
                  message: "Ugh, Private Kranos - You is one ugly mother! ðŸ¤®",
                },
                {
                  user: "panda",
                  message:
                    "Ok, let me get a good look at you Private Kranos! Upload a photo of yourself by dropping it belowâ€¦ ðŸ“¸",
                },
                {
                  user: "panda",
                  message:
                    "I canâ€™t hear you, sound off like youâ€™ve got a pair!ðŸ¥œ",
                },
                {
                  user: "panda",
                  message:
                    "Everywhere we go-oh... Everywhere we go-ohâ€¦ People wanna know-ohâ€¦ Who we areâ€¦ Where we come fromâ€¦ So we tell themâ€¦ We are Pandas!â€¦ Mighty mighty Pandas!ðŸ“£",
                },
                {
                  user: "panda",
                  message:
                    "Thatâ€™s more like it! Right then Private Kranos! If it ain't raining, we ain't training - move out!ðŸŒ§ï¸",
                },
                {
                  user: "user",
                  message: "Kranos",
                },
                {
                  user: "panda",
                  message:
                    "What would you like your CODENAME to be here at Panda Bootcamp? ðŸ¥¸",
                },
                {
                  user: "panda",
                  message:
                    "Ok, Private Betts. Weâ€™re going to have to pick this up a bit if youâ€™re to make it through Panda Bootcamp.â›ºï¸",
                },
                {
                  user: "user",
                  message: "Betts",
                },
                {
                  user: "panda",
                  message:
                    "We don't use first names at Panda Bootcamp! I meant, whatâ€™s your SURNAME?! ðŸ«¡",
                },
                {
                  user: "panda",
                  message: "What is your major malfunction Private Sean?!ðŸ˜³",
                },
                {
                  user: "user",
                  message: "Sean",
                },
                {
                  user: "panda",
                  message: "Whatâ€™s your FIRST NAME? ðŸ«¡",
                },
                {
                  user: "panda",
                  message: "Welcome to Panda Bootcamp!â›ºï¸",
                },
                {
                  user: "panda",
                  message: "Good Afternoon Private!ðŸ«¡",
                },
              ],
            },
            {
              time: "14:20",
              title: "Good Afternoon Private!ðŸ«¡",
              content: [
                {
                  user: "panda",
                  message:
                    "With all that said, letâ€™s get on with the mission. Eyes forward, soldier! ðŸ‘€",
                },
                {
                  user: "panda",
                  message:
                    "You can ask me at any time what data I have on you and Iâ€™ll give you a detailed summary. ðŸ’½",
                },
                {
                  user: "panda",
                  message:
                    "Your data is your data - it sits isolated in your account and can be deleted by you at any time. âŒ",
                },
                {
                  user: "panda",
                  message:
                    "Being a Private means Iâ€™m very disciplined with your data - I will never use it in my training, I only use the text from the conversations we have. ðŸ™",
                },
                {
                  user: "panda",
                  message:
                    "Iâ€™m just a Private, and in beta right now, but Iâ€™ve got lots of plans of how I can train and get promoted. One day I want to be a Colonel! ðŸ¤“",
                },
                {
                  user: "panda",
                  message:
                    "This means I can help you find answers to questions you have, make personalised recommendations, help you learn by gathering and summarising information and lots of other tasks.ðŸ’ª",
                },
                {
                  user: "panda",
                  message:
                    "I can learn from lots of different things, like: ðŸ‘©â€ðŸ’»Â How you browse the internet, ðŸ¤·â€â™€ï¸Â Who your friends are, ðŸŽ§Â What music you listen to, ðŸ“ºÂ What you like watching, ðŸ’°Â What you spend your money on, ðŸ¤“Â What youâ€™re interested in",
                },
                {
                  user: "panda",
                  message:
                    "There are lots of things I can help you with and the more you share, the better I can do my job! ðŸ¼",
                },
                {
                  user: "panda",
                  message:
                    "Iâ€™m a personalised AI assistant that learns from you and your data. Youâ€™re welcome.ðŸ™„",
                },
                {
                  user: "panda",
                  message:
                    "To get us there weâ€™re going to have to go through hell and back, but Panda Bootcamp will get you ready for the fight! ðŸ¥·",
                },
                {
                  user: "panda",
                  message:
                    "The objective of our mission is make you and I best friends. ðŸ˜‡",
                },
                {
                  user: "panda",
                  message:
                    "Right, form up and Iâ€™ll take you through our mission. Ten-hut! ðŸ«¡",
                },
                {
                  user: "panda",
                  message: "Ugh, Private Kranos - You is one ugly mother! ðŸ¤®",
                },
                {
                  user: "panda",
                  message:
                    "Ok, let me get a good look at you Private Kranos! Upload a photo of yourself by dropping it belowâ€¦ ðŸ“¸",
                },
                {
                  user: "panda",
                  message:
                    "I canâ€™t hear you, sound off like youâ€™ve got a pair!ðŸ¥œ",
                },
                {
                  user: "panda",
                  message:
                    "Everywhere we go-oh... Everywhere we go-ohâ€¦ People wanna know-ohâ€¦ Who we areâ€¦ Where we come fromâ€¦ So we tell themâ€¦ We are Pandas!â€¦ Mighty mighty Pandas!ðŸ“£",
                },
                {
                  user: "panda",
                  message:
                    "Thatâ€™s more like it! Right then Private Kranos! If it ain't raining, we ain't training - move out!ðŸŒ§ï¸",
                },
                {
                  user: "user",
                  message: "Kranos",
                },
                {
                  user: "panda",
                  message:
                    "What would you like your CODENAME to be here at Panda Bootcamp? ðŸ¥¸",
                },
                {
                  user: "panda",
                  message:
                    "Ok, Private Betts. Weâ€™re going to have to pick this up a bit if youâ€™re to make it through Panda Bootcamp.â›ºï¸",
                },
                {
                  user: "user",
                  message: "Betts",
                },
                {
                  user: "panda",
                  message:
                    "We don't use first names at Panda Bootcamp! I meant, whatâ€™s your SURNAME?! ðŸ«¡",
                },
                {
                  user: "panda",
                  message: "What is your major malfunction Private Sean?!ðŸ˜³",
                },
                {
                  user: "user",
                  message: "Sean",
                },
                {
                  user: "panda",
                  message: "Whatâ€™s your FIRST NAME? ðŸ«¡",
                },
                {
                  user: "panda",
                  message: "Welcome to Panda Bootcamp!â›ºï¸",
                },
                {
                  user: "panda",
                  message: "Good Afternoon Private!ðŸ«¡",
                },
              ],
            },
            {
              time: "14:22",
              title: "Good Afternoon Private!ðŸ«¡",
              content: [
                {
                  user: "panda",
                  message:
                    "With all that said, letâ€™s get on with the mission. Eyes forward, soldier! ðŸ‘€",
                },
                {
                  user: "panda",
                  message:
                    "You can ask me at any time what data I have on you and Iâ€™ll give you a detailed summary. ðŸ’½",
                },
                {
                  user: "panda",
                  message:
                    "Your data is your data - it sits isolated in your account and can be deleted by you at any time. âŒ",
                },
                {
                  user: "panda",
                  message:
                    "Being a Private means Iâ€™m very disciplined with your data - I will never use it in my training, I only use the text from the conversations we have. ðŸ™",
                },
                {
                  user: "panda",
                  message:
                    "Iâ€™m just a Private, and in beta right now, but Iâ€™ve got lots of plans of how I can train and get promoted. One day I want to be a Colonel! ðŸ¤“",
                },
                {
                  user: "panda",
                  message:
                    "This means I can help you find answers to questions you have, make personalised recommendations, help you learn by gathering and summarising information and lots of other tasks.ðŸ’ª",
                },
                {
                  user: "panda",
                  message:
                    "I can learn from lots of different things, like: ðŸ‘©â€ðŸ’»Â How you browse the internet, ðŸ¤·â€â™€ï¸Â Who your friends are, ðŸŽ§Â What music you listen to, ðŸ“ºÂ What you like watching, ðŸ’°Â What you spend your money on, ðŸ¤“Â What youâ€™re interested in",
                },
                {
                  user: "panda",
                  message:
                    "There are lots of things I can help you with and the more you share, the better I can do my job! ðŸ¼",
                },
                {
                  user: "panda",
                  message:
                    "Iâ€™m a personalised AI assistant that learns from you and your data. Youâ€™re welcome.ðŸ™„",
                },
                {
                  user: "panda",
                  message:
                    "To get us there weâ€™re going to have to go through hell and back, but Panda Bootcamp will get you ready for the fight! ðŸ¥·",
                },
                {
                  user: "panda",
                  message:
                    "The objective of our mission is make you and I best friends. ðŸ˜‡",
                },
                {
                  user: "panda",
                  message:
                    "Right, form up and Iâ€™ll take you through our mission. Ten-hut! ðŸ«¡",
                },
                {
                  user: "panda",
                  message: "Ugh, Private Kranos - You is one ugly mother! ðŸ¤®",
                },
                {
                  user: "panda",
                  message:
                    "Ok, let me get a good look at you Private Kranos! Upload a photo of yourself by dropping it belowâ€¦ ðŸ“¸",
                },
                {
                  user: "panda",
                  message:
                    "I canâ€™t hear you, sound off like youâ€™ve got a pair!ðŸ¥œ",
                },
                {
                  user: "panda",
                  message:
                    "Everywhere we go-oh... Everywhere we go-ohâ€¦ People wanna know-ohâ€¦ Who we areâ€¦ Where we come fromâ€¦ So we tell themâ€¦ We are Pandas!â€¦ Mighty mighty Pandas!ðŸ“£",
                },
                {
                  user: "panda",
                  message:
                    "Thatâ€™s more like it! Right then Private Kranos! If it ain't raining, we ain't training - move out!ðŸŒ§ï¸",
                },
                {
                  user: "user",
                  message: "Kranos",
                },
                {
                  user: "panda",
                  message:
                    "What would you like your CODENAME to be here at Panda Bootcamp? ðŸ¥¸",
                },
                {
                  user: "panda",
                  message:
                    "Ok, Private Betts. Weâ€™re going to have to pick this up a bit if youâ€™re to make it through Panda Bootcamp.â›ºï¸",
                },
                {
                  user: "user",
                  message: "Betts",
                },
                {
                  user: "panda",
                  message:
                    "We don't use first names at Panda Bootcamp! I meant, whatâ€™s your SURNAME?! ðŸ«¡",
                },
                {
                  user: "panda",
                  message: "What is your major malfunction Private Sean?!ðŸ˜³",
                },
                {
                  user: "user",
                  message: "Sean",
                },
                {
                  user: "panda",
                  message: "Whatâ€™s your FIRST NAME? ðŸ«¡",
                },
                {
                  user: "panda",
                  message: "Welcome to Panda Bootcamp!â›ºï¸",
                },
                {
                  user: "panda",
                  message: "Good Afternoon Private!ðŸ«¡",
                },
              ],
            },
          ],
        },
        {
          date: "Today",
          chats: [
            {
              time: "15:06",
              title: "Good Afternoon Private!ðŸ«¡",
              content: [
                {
                  user: "panda",
                  message:
                    "With all that said, letâ€™s get on with the mission. Eyes forward, soldier! ðŸ‘€",
                },
                {
                  user: "panda",
                  message:
                    "You can ask me at any time what data I have on you and Iâ€™ll give you a detailed summary. ðŸ’½",
                },
                {
                  user: "panda",
                  message:
                    "Your data is your data - it sits isolated in your account and can be deleted by you at any time. âŒ",
                },
                {
                  user: "panda",
                  message:
                    "Being a Private means Iâ€™m very disciplined with your data - I will never use it in my training, I only use the text from the conversations we have. ðŸ™",
                },
                {
                  user: "panda",
                  message:
                    "Iâ€™m just a Private, and in beta right now, but Iâ€™ve got lots of plans of how I can train and get promoted. One day I want to be a Colonel! ðŸ¤“",
                },
                {
                  user: "panda",
                  message:
                    "This means I can help you find answers to questions you have, make personalised recommendations, help you learn by gathering and summarising information and lots of other tasks.ðŸ’ª",
                },
                {
                  user: "panda",
                  message:
                    "I can learn from lots of different things, like: ðŸ‘©â€ðŸ’»Â How you browse the internet, ðŸ¤·â€â™€ï¸Â Who your friends are, ðŸŽ§Â What music you listen to, ðŸ“ºÂ What you like watching, ðŸ’°Â What you spend your money on, ðŸ¤“Â What youâ€™re interested in",
                },
                {
                  user: "panda",
                  message:
                    "There are lots of things I can help you with and the more you share, the better I can do my job! ðŸ¼",
                },
                {
                  user: "panda",
                  message:
                    "Iâ€™m a personalised AI assistant that learns from you and your data. Youâ€™re welcome.ðŸ™„",
                },
                {
                  user: "panda",
                  message:
                    "To get us there weâ€™re going to have to go through hell and back, but Panda Bootcamp will get you ready for the fight! ðŸ¥·",
                },
                {
                  user: "panda",
                  message:
                    "The objective of our mission is make you and I best friends. ðŸ˜‡",
                },
                {
                  user: "panda",
                  message:
                    "Right, form up and Iâ€™ll take you through our mission. Ten-hut! ðŸ«¡",
                },
                {
                  user: "panda",
                  message: "Ugh, Private Kranos - You is one ugly mother! ðŸ¤®",
                },
                {
                  user: "panda",
                  message: "Whatâ€™s your FIRST NAME? ðŸ«¡",
                },
                {
                  user: "panda",
                  message: "Welcome to Panda Bootcamp!â›ºï¸",
                },
                {
                  user: "panda",
                  message: "Good Afternoon Private!ðŸ«¡",
                },
              ],
            },
          ],
        },
      ],
    };
  },
  watch: {
    userChatHistory: {
      deep: true,
      handler(newVal, oldVal) {
        if (newVal.length > 0) {
          this.ready = true;
        }
      },
    },
  },
  props: {
    historyMenu: Boolean,
    // userChatHistory: Array,
  },
  created() {
    if (this.userChatHistory && this.userChatHistory.length > 0) {
      // Select the first chat in the first date item by default
      this.selectedChat = this.userChatHistory[0].chats[0];
    }
  },
  computed: {
    reversedChatData() {
      return this.userChatHistory.slice().reverse();
    },
  },
  methods: {
    toggleVisibility(index) {
      this.reversedChatData[index].isVisible =
        !this.reversedChatData[index].isVisible;
    },
  },
  components: {
    chatMessage,
  },
};
</script>

<template>
  <div className="userChatHistory" v-if="this.userChatHistory && historyMenu">
    <div className="userChatHistoryDates">
      <div className="chatHistorySearch">
        <input className="chatHistorySearchBox" type="text" v-model="chatHistorySearch" placeholder="Search chat history..." />
      </div>
      <ul>
        <li
          className="chatHistoryDay"
          v-for="(item, index) in reversedChatData"
          :key="index"
        >
          <span @click="toggleVisibility(index)">{{
            item.isVisible ? "- " : "+ "
          }}</span>
          <span @click="toggleVisibility(index)">{{ item.date }}</span>
          <ul v-show="item.isVisible">
            <li
              className="chatHistoryTimeTitle"
              v-for="(chat, chatIndex) in item.chats"
              :key="chatIndex"
            >
              <span className="chatHistoryTime" @click="selectedChat = chat">{{ chat.time }}:</span>
              <span className="chatHistoryTitle" @click="selectedChat = chat">{{chat.title}}</span>
            </li>
          </ul>
        </li>
      </ul>
    </div>
    <div className="userChatHistoryContent" id="chatContainer">
      <span v-if="selectedChat">
        <chatMessage
          v-for="(contentItem, contentIndex) in selectedChat.content"
          :message="contentItem"
          :class="contentItem.user + 'Chat'"
          :key="contentIndex"
        ></chatMessage>
      </span>
    </div>
  </div>
</template>
